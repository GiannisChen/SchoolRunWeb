<!DOCTYPE html>
<!-- saved from url=(0052)http://getbootstrap.com/docs/4.0/examples/dashboard/ -->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Dashboard Template for Bootstrap</title>
    <!-- Bootstrap core CSS -->
    <link href="asserts/css/bootstrap.min.css" th:href="@{/webjars/bootstrap/4.5.2/css/bootstrap.css}" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="asserts/css/dashboard.css" th:href="@{/asserts/css/dashboard.css}" rel="stylesheet">
	<link href="asserts/css/style.css" rel="stylesheet">
    <style type="text/css">
        /* Chart.js */

        @-webkit-keyframes chartjs-render-animation {
            from {
                opacity: 0.99
            }
            to {
                opacity: 1
            }
        }

        @keyframes chartjs-render-animation {
            from {
                opacity: 0.99
            }
            to {
                opacity: 1
            }
        }

        .chartjs-render-monitor {
            -webkit-animation: chartjs-render-animation 0.001s;
            animation: chartjs-render-animation 0.001s;
        }
    </style>
</head>

<body>
<!--引入topbar-->
<div th:replace="commons/bar::topbar"></div>
<div class="container-fluid">
    <div class="row">
        <!--引入sidebar-->
        <div th:replace="commons/bar::#sidebar(activeUri='dashboard.html')"></div>
        <main role="main" class="col-md-9 ml-sm-auto col-lg-10 pt-3 px-4">
			<div class="container-fluid">
				<section id="main-content">
					<div class="row">
						<div class="col-lg-3">
							<div class="card">
								<div class="stat-widget-two">
									<div class="stat-content">
										<div class="stat-text">今日打卡（人）</div>
										<div class="stat-digit" th:text="${details.getPostDailyNum()}">--</div>
									</div>
									<div class="progress">
										<div class="progress-bar progress-bar-success w-50" role="progressbar" aria-valuenow="85" aria-valuemin="0" aria-valuemax="100"></div>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-3">
							<div class="card">
								<div class="stat-widget-two">
									<div class="stat-content">
										<div class="stat-text">今日体能（人）</div>
										<div class="stat-digit" th:text="${details.getTraceDailyNum()}">--</div>
									</div>
									<div class="progress">
										<div class="progress-bar progress-bar-primary w-50" role="progressbar" aria-valuenow="78" aria-valuemin="0" aria-valuemax="100"></div>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-3">
							<div class="card">
								<div class="stat-widget-two">
									<div class="stat-content">
										<div class="stat-text">打卡总计（人次）</div>
										<div class="stat-digit" th:text="${details.getPostTotalNum()}">--</div>
									</div>
									<div class="progress">
										<div class="progress-bar progress-bar-warning w-50" role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-3">
							<div class="card">
								<div class="stat-widget-two">
									<div class="stat-content">
										<div class="stat-text">体能总计（人次）</div>
										<div class="stat-digit" th:text="${details.getTraceTotalNum()}">--</div>
									</div>
									<div class="progress">
										<div class="progress-bar progress-bar-danger w-50" role="progressbar" aria-valuenow="65" aria-valuemin="0" aria-valuemax="100"></div>
									</div>
								</div>
							</div>
							<!-- /# card -->
						</div>
						<!-- /# column -->
					</div>
					<!-- /# row -->
					<div class="row">
						<!-- column -->
						<div class="col-lg-10">
							<div class="card">
								<div class="card-body">
									<h4 class="stat-text" style=" margin-bottom: 20px">每日体能</h4>
									<div id="heat-chart" style="width: 100%; height: 200px;"></div>
								</div>
							</div>
						</div>
						<!-- column -->
						<div class="col-md-2">
							<div class="card text-center">
								<div class="m-t-10">
									<p>Customer Feedback</p>
									<h5>385749</h5>
								</div>
								<div class="widget-card-circle pr m-t-20 m-b-20" id="info-circle-card">
									<i class="ti-control-shuffle pa"></i>
								</div>
								<ul class="widget-line-list m-b-15">
									<li class="border-right">92% <br><span class="color-success"><i class="ti-hand-point-up"></i> Positive</span></li>
									<li>8% <br><span class="color-danger"><i class="ti-hand-point-down"></i>Negative</span></li>
								</ul>
							</div>
						</div>

					</div>
				</section>
			</div>
        </main>
    </div>
</div>

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script type="text/javascript" src="asserts/js/jquery-3.2.1.slim.min.js"
        th:src="@{/webjars/jquery/3.5.1/jquery.js}"></script>
<script type="text/javascript" src="asserts/js/popper.min.js"
        th:src="@{/webjars/popper.js/1.11.1/dist/popper.js}"></script>
<script type="text/javascript" src="asserts/js/bootstrap.min.js"
        th:src="@{/webjars/bootstrap/4.5.2/js/bootstrap.js}"></script>

<!-- Icons -->
<script type="text/javascript" src="asserts/js/feather.min.js" th:src="@{/asserts/js/feather.min.js}"></script>
<script>
    feather.replace()
</script>
<!-- Graphs -->
<script type="text/javascript" th:src="@{/webjars/echarts/4.7.0/dist/echarts.js}"></script>
<!--script type="text/javascript">
	function getDetails() {
		$.ajax({
			//几个参数需要注意一下
			type: "POST",//方法类型
			dataType: "json",//预期服务器返回的数据类型
			url: "/dashboard/getDetails",//url
			success: function (res) {
				console.log(res);
			},
			error: function () {
				console.log("error");
			}
		});
	}
</script-->
<script src="asserts/js/theme/macarons.js"></script>
<script type="text/javascript" th:inline="javascript">
	var heat_chart = echarts.init(document.getElementById('heat-chart'), 'macarons');

	var tc = [[${details.traceCalendar}]];
	var map = new Map(Object.entries([[${details.traceCalendar}]]));
	console.log(map);
	var data = [];
	map.forEach(function (value, key) {
		data.push([key, value]);
	})

	var cur = new Date();
	var range = cur.getFullYear().toString();
	option = {
		tooltip: {
			formatter: function (params) {
				return params.value[0] + "打卡" + params.value[1] + "人"
			},
		},
		visualMap: {
			min: 0,
			max: 15,
			type: 'piecewise',
			orient: 'horizontal',
			left: 'center',
			top: 160,
			textStyle: {
				color: '#000'
			}
		},
		calendar: {
			top: 40,
			left: 30,
			right: 30,
			cellSize: ['auto', 13],
			range: range,
			itemStyle: {
				borderWidth: 0.5
			},
			yearLabel: {show: false}
		},
		series: {
			type: 'heatmap',
			coordinateSystem: 'calendar',
			data: data
		}
	};

	// 使用刚指定的配置项和数据显示图表。
	heat_chart.setOption(option);
</script>
</body>
</html>